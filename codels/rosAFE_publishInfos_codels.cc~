#include "processorCommon.hpp"
#include "stateMachine.hpp"
#include <pthread.h>

/** Codel publish of activity ModifyParameter.
 *
 * Triggered by rosAFE_publish.
 * Yields to rosAFE_ether.
 * Throws rosAFE_e_noMemory, rosAFE_e_noSuchProcessor,
 *        rosAFE_e_noSuchParameter.
 */
/* already defined in service updateParameters */


/** Codel stopPublish of activity ModifyParameter.
 *
 * Triggered by rosAFE_stop.
 * Yields to rosAFE_ether.
 * Throws rosAFE_e_noMemory, rosAFE_e_noSuchProcessor,
 *        rosAFE_e_noSuchParameter.
 */
/* already defined in service updateParameters */



/* --- Activity RemoveProcessor ----------------------------------------- */

/** Codel removeProcessor of activity RemoveProcessor.
 *
 * Triggered by rosAFE_start.
 * Yields to rosAFE_ether.
 * Throws rosAFE_e_noSuchProcessor.
 */
genom_event
removeProcessor(const char *name, rosAFE_flagMap **flagMapSt,
                rosAFE_flagMap **newDataMapSt, genom_context self)
{
  SM::removeFlag( name, newDataMapSt, self );
  if ( SM::removeFlag( name, flagMapSt, self ) )
		return rosAFE_wait;
  else
	return rosAFE_e_noSuchProcessor( self );
}

/** Codel wait of activity RemoveProcessor.
 *
 * Triggered by rosAFE_wait.
 * Yields to rosAFE_publish.
 * Throws rosAFE_e_noSuchProcessor.
 */
genom_event
wait(genom_context self)
{
  sleep(1);
  return rosAFE_publish;
}

/** Codel publish of activity RemoveProcessor.
 *
 * Triggered by rosAFE_publish.
 * Yields to rosAFE_ether.
 * Throws rosAFE_e_noSuchProcessor.
 */
/* already defined in service updateParameters */


/** Codel stopPublish of activity RemoveProcessor.
 *
 * Triggered by rosAFE_stop.
 * Yields to rosAFE_ether.
 * Throws rosAFE_e_noSuchProcessor.
 */
/* already defined in service updateParameters */

